<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Trainer ShinyDex Single Page</title>
<style>
  :root {
    --bg:#080808;
    --panel:#111213;
    --muted:#c7cbd1;
  }
  * { box-sizing: border-box; }
  body {
    margin: 0; font-family: 'VT323', monospace; background: linear-gradient(180deg,#060606,#0b0b0b); color: var(--muted);
  }
  header {
    background: linear-gradient(90deg,#b71c1c,#ff5252);
    padding: 1.5rem; text-align: center; font-size: 2.4rem; color: white; border-radius: 0 0 12px 12px; margin-bottom: 1rem;
    text-shadow: 0 0 12px rgba(255,82,82,0.5);
  }
  #trainer-select {
    display: flex;
    justify-content: center;
    gap: 5rem;
    margin: 0 1rem 2rem;
  }
  .character-card {
    background: linear-gradient(180deg, #222224, #2c2c2f);
    border-radius: 20px;
    padding: 1rem 2rem;
    cursor: pointer;
    text-align: center;
    width: 220px;
    box-shadow: 0 8px 26px rgba(0,0,0,0.7);
    user-select:none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .character-card:hover, .character-card:focus {
    transform: translateY(-10px) scale(1.05);
    box-shadow: 0 18px 40px rgba(255,82,82,0.8);
    outline:none;
  }
  .character-card img {
    width: 200px;
    height: 300px;
    image-rendering: pixelated;
    border-radius: 12px;
    border: 2px solid rgba(255,82,82,0.6);
    margin-bottom: 0.6rem;
  }
  .character-name {
    font-size: 2.4rem;
    color: #ff5252;
    text-transform: uppercase;
    letter-spacing: 0.15em;
  }

  #shiny-section {
    display: none;
    max-width: 1200px;
    margin: 0 auto 3rem;
    gap: 1.6rem;
    padding: 0 1rem;
    min-height: 70vh;
    display: flex;
  }
  #left-panel {
    flex: 3 1 0;
    background: var(--panel);
    border-radius: 14px;
    padding: 1.6rem;
    box-shadow: 0 6px 24px rgba(0,0,0,0.6);
    min-height: 60vh;
    overflow-y: auto;
  }
  #right-panel {
    flex: 1 1 320px;
    background: linear-gradient(180deg,#131416,#0f1113);
    border-radius: 14px;
    padding: 1.4rem;
    box-shadow: 0 6px 22px rgba(0,0,0,0.6);
    min-width: 280px;
    position: relative;
    color: var(--muted);
  }
  .pokedex-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px,1fr));
    gap: 12px;
  }
  .poke-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
    border-radius: 12px;
    padding: 10px;
    text-align: center;
    cursor: pointer;
    border: 2px solid rgba(255,255,255,0.03);
    transition: transform 0.18s ease, box-shadow 0.18s ease;
    position: relative;
    overflow: visible;
  }
  .poke-card:hover, .poke-card:focus {
    transform: translateY(-6px);
    box-shadow: 0 14px 40px rgba(0,0,0,0.6);
    outline: none;
    z-index: 2;
  }
  .dexnum {
    font-size: 0.9rem;
    color: #ffb6b6;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .pokename {
    font-size: 1.2rem;
    color: #ff6b6b;
    margin-bottom: 8px;
    text-transform: capitalize;
  }
  .sprite {
    width: 96px;
    height: 96px;
    image-rendering: pixelated;
    display: block;
    margin: 0 auto 8px;
  }

  /* side info */
  #infoSprite {
    width: 160px;
    height: 160px;
    image-rendering: pixelated;
    display: block;
    margin: 0 auto 12px;
  }
  #infoName {
    font-size: 2rem;
    color: #ff6b6b;
    text-align: center;
    text-transform: capitalize;
    margin-bottom: 6px;
  }
  #infoNum {
    text-align: center;
    color: #ffb6b6;
    font-weight: 700;
    margin-bottom: 8px;
  }
  .info-row {
    display: flex;
    gap: 8px;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
  }
  .chip {
    background: rgba(255,255,255,0.03);
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 0.9rem;
  }
  .info-block {
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
    padding: 10px;
    border-radius: 10px;
    margin-top: 8px;
    font-size: 0.95rem;
    line-height: 1.25;
  }
  .mini-row {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-top: 10px;
  }
  .btn {
    background: #222;
    padding: 6px 10px;
    border-radius: 8px;
    cursor: pointer;
    border: 1px solid rgba(255,255,255,0.03);
    user-select:none;
    color: var(--muted);
  }
  .btn:hover {
    background: #ff5252;
    border-color: #ff6b6b;
  }
</style>
</head>
<body>

<header>POKÉMMO — Trainer ShinyDex</header>

<section id="trainer-select" aria-label="Select Trainer">
  <div class="character-card" tabindex="0" data-trainer="Tuna" aria-label="Select Tuna">
    <img src="https://archives.pokemmo.eu/images/avatarMale_3.png" alt="Tuna character sprite" />
    <div class="character-name">Tuna</div>
  </div>
  <div class="character-card" tabindex="0" data-trainer="Chels" aria-label="Select Chels">
    <img src="https://archives.pokemmo.eu/images/avatarFemale_14.png" alt="Chels character sprite" />
    <div class="character-name">Chels</div>
  </div>
</section>

<section id="shiny-section" aria-label="Shiny Pokémon for selected trainer" tabindex="-1">
  <div id="left-panel">
    <div id="pokedex-container" class="pokedex-grid" tabindex="0"></div>
  </div>
  <aside id="right-panel" aria-live="polite">
    <div class="trainer" style="text-align:center; margin-bottom: 1rem;">
      <img id="trainerAvatar" src="" alt="Trainer avatar" style="width:140px; height:210px; image-rendering: pixelated; border-radius:10px;" />
      <div>
        <div id="trainerName" style="font-size: 1.8rem; color: #ff6b6b; margin-top: 0.5rem;"></div>
        <div id="shinyCount" style="color: #ffb6b6; font-weight: 700;"></div>
      </div>
    </div>

    <img id="infoSprite" src="" alt="info sprite" />
    <div id="infoName"></div>
    <div id="infoNum"></div>

    <div class="info-row">
      <div class="chip" id="infoTrainer"></div>
      <div class="chip" id="infoLevel"></div>
    </div>

    <div class="info-block" id="caughtInfo">
      <strong>Caught:</strong>
      <div id="caughtText"></div>

      <hr style="opacity:.06;margin:8px 0">

      <strong>Preferences</strong>
      <div id="prefs"></div>

      <hr style="opacity:.06;margin:8px 0">

      <strong>Notes</strong>
      <div id="notes"></div>
    </div>

    <div class="mini-row">
      <button class="btn" id="toggleBackBtn">Show back</button>
      <button class="btn" id="playCryBtn">Play cry</button>
      <button class="btn" id="backToSelectBtn" style="margin-left:auto; background:#900; color:#fff;">Back</button>
    </div>
  </aside>
</section>

<script>
const trainers = {
  Tuna: {
    avatar: "https://archives.pokemmo.eu/images/avatarMale_3.png",
  },
  Chels: {
    avatar: "https://archives.pokemmo.eu/images/avatarFemale_14.png",
  }
};

const shinies = [
  // Chels
  {
    file: "girafarig",
    name: "Girafarig",
    dex: 203,
    trainer: "Chels",
    frontLocal: "https://archives.pokemmo.eu/shiny/front/girafarig.gif",
    backLocal: "https://archives.pokemmo.eu/shiny/back/girafarig.gif",
    cryLocal: "https://archives.pokemmo.eu/cries/girafarig.ogg",
    caught: {
      level: 24,
      place: "Route 43",
      encounters: 4210,
      datetime: "2025-07-11 22:27:13"
    },
    prefs: { likes: "Spicy food", dislikes: "Dry food", personality: "Likes to thrash about" },
    notes: ""
  },
  {
    file: "mankey",
    name: "Mankey",
    dex: 56,
    trainer: "Chels",
    frontLocal: "https://archives.pokemmo.eu/shiny/front/mankey.gif",
    backLocal: "https://archives.pokemmo.eu/shiny/back/mankey.gif",
    cryLocal: "https://archives.pokemmo.eu/cries/mankey.ogg",
    caught: {
      level: 21,
      place: "Route 42",
      encounters: 3562,
      datetime: "2025-07-12 23:20:40"
    },
    prefs: { likes: "Sour food", dislikes: "Sweet food", personality: "Mischievous" },
    notes: ""
  },
  {
    file: "magikarp",
    name: "Magikarp",
    dex: 129,
    trainer: "Chels",
    frontLocal: "https://archives.pokemmo.eu/shiny/front/magikarp.gif",
    backLocal: "https://archives.pokemmo.eu/shiny/back/magikarp.gif",
    cryLocal: "https://archives.pokemmo.eu/cries/magikarp.ogg",
    caught: {
      level: 33,
      place: "Dragon's Den",
      encounters: null,
      datetime: "2025-06-10 02:51:00"
    },
    prefs: { likes: "Sweet food", dislikes: "Bitter food", personality: "Somewhat vain" },
    notes: ""
  },
  // Tuna
  {
    file: "lilligant",
    name: "Lilligant",
    dex: 549,
    trainer: "Tuna",
    frontLocal: "https://archives.pokemmo.eu/shiny/front/lilligant.gif",
    backLocal: "https://archives.pokemmo.eu/shiny/back/lilligant.gif",
    cryLocal: "https://archives.pokemmo.eu/cries/lilligant.ogg",
    caught: {
      level: 19,
      place: "Lostlorn Forest",
      encounters: 5165,
      datetime: "2025-08-10 18:04:12"
    },
    prefs: { likes: "—", dislikes: "—", personality: "Often dozes off" },
    notes: ""
  },
  {
    file: "whirlipede",
    name: "Whirlipede",
    dex: 544,
    trainer: "Tuna",
    frontLocal: "https://archives.pokemmo.eu/shiny/front/whirlipede.gif",
    backLocal: "https://archives.pokemmo.eu/shiny/back/whirlipede.gif",
    cryLocal: "https://archives.pokemmo.eu/cries/whirlipede.ogg",
    caught: {
      level: 18,
      place: "Lostlorn Forest",
      encounters: 4553,
      datetime: "2025-08-09 20:49:44"
    },
    prefs: { likes: "Dry food", dislikes: "Sour food", personality: "Mischievous" },
    notes: ""
  }
];

// Elements
const trainerSelect = document.getElementById('trainer-select');
const shinySection = document.getElementById('shiny-section');
const pokedexContainer = document.getElementById('pokedex-container');

const trainerAvatar = document.getElementById('trainerAvatar');
const trainerName = document.getElementById('trainerName');
const shinyCount = document.getElementById('shinyCount');

const infoSprite = document.getElementById('infoSprite');
const infoName = document.getElementById('infoName');
const infoNum = document.getElementById('infoNum');
const infoTrainer = document.getElementById('infoTrainer');
const infoLevel = document.getElementById('infoLevel');
const caughtText = document.getElementById('caughtText');
const prefs = document.getElementById('prefs');
const notes = document.getElementById('notes');

const toggleBackBtn = document.getElementById('toggleBackBtn');
const playCryBtn = document.getElementById('playCryBtn');
const backToSelectBtn = document.getElementById('backToSelectBtn');

let currentTrainer = null;
let currentPokemon = null;
let showingBack = false;
let audio = null;

function clearInfo() {
  infoSprite.src = "";
  infoName.textContent = "";
  infoNum.textContent = "";
  infoTrainer.textContent = "";
  infoLevel.textContent = "";
  caughtText.textContent = "";
  prefs.textContent = "";
  notes.textContent = "";
  showingBack = false;
  toggleBackBtn.textContent = "Show back";
  playCryBtn.disabled = true;
}

function renderShinies(trainer) {
  pokedexContainer.innerHTML = "";
  const filtered = shinies.filter(s => s.trainer === trainer);
  shinyCount.textContent = `${filtered.length} shinies`;
  filtered.forEach(p => {
    const card = document.createElement('div');
    card.className = 'poke-card';
    card.tabIndex = 0;
    card.setAttribute('role', 'button');
    card.setAttribute('aria-label', `${p.name}, dex number ${p.dex}`);
    const img = document.createElement('img');
    img.className = 'sprite';
    img.src = p.frontLocal;
    img.alt = `${p.name} shiny sprite front`;
    card.appendChild(img);
    const dexNum = document.createElement('div');
    dexNum.className = 'dexnum';
    dexNum.textContent = `#${p.dex}`;
    card.appendChild(dexNum);
    const nameDiv = document.createElement('div');
    nameDiv.className = 'pokename';
    nameDiv.textContent = p.name;
    card.appendChild(nameDiv);

    card.addEventListener('click', () => {
      showInfo(p);
    });
    card.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        showInfo(p);
      }
    });

    pokedexContainer.appendChild(card);
  });

  clearInfo();
  if (filtered.length > 0) showInfo(filtered[0]);
}

function showInfo(pokemon) {
  currentPokemon = pokemon;
  showingBack = false;
  infoSprite.src = pokemon.frontLocal;
  infoName.textContent = pokemon.name;
  infoNum.textContent = `#${pokemon.dex}`;
  infoTrainer.textContent = pokemon.trainer;
  infoLevel.textContent = `Lv. ${pokemon.caught.level ?? '?'}`;
  caughtText.textContent = `
    Place: ${pokemon.caught.place || '?'}\n
    Encounters: ${pokemon.caught.encounters ?? '?'}\n
    Caught at: ${pokemon.caught.datetime || '?'}
  `;
  prefs.textContent = `Likes: ${pokemon.prefs.likes || '?'}\nDislikes: ${pokemon.prefs.dislikes || '?'}\nPersonality: ${pokemon.prefs.personality || '?'}`;
  notes.textContent = pokemon.notes || "(No notes
